/*
 * API_debounce.c
 *
 *  Created on: Nov 11, 2021
 *      Author: Luis David Díaz Charris
 */

#include "API_debounce.h"
#include "API_delay.h"
#include <stdint.h>
#include <stdbool.h>

void buttonPressed(void);
void buttonReleased(void);

typedef enum{
	BUTTON_UP = 0,
	BUTTON_RASING,
	BUTTON_DOWN,
	BUTTON_FALLING
} debounce_t;

static debounce_t debounceState;
static delay_t delay;

#define DEALAY_TIME 40

bool_t debounceInit(PORT, PIN){ //PORT debe cer un puerto GPIO válido ej: GPIOA o GPIOB. Y el PIN debe ser un pin válido ej: GPIO_PIN_1 o GPIO_PIN_15
	debounceState = BUTTON_UP;
	delayInit(&delay, DELAY_TIME);

	//Configuración del pin que recibe
	GPIO_InitStruct.Pin = GPIO_PIN_1;
	GPIO_InitStruct.Mode = GPIO_MODE_IT_RISING;
	GPIO_InitStruct.Pull = GPIO_NOPULL;
	HAL_GPIO_Init(PORT, &GPIO_InitStruct);

}
